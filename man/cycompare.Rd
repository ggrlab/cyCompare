% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cycompare.R
\name{cycompare}
\alias{cycompare}
\title{Compare Flow Cytometry Data Across Devices}
\usage{
cycompare(
  flowframes,
  df,
  ff_columns_relevant,
  transformlist = function(x) asinh(x/1000),
  gatingsets,
  gatename_primary,
  n_events_postgate = 10000,
  postgate_sample_seed = 42,
  marker_to_gate,
  prepared_saveload = FALSE,
  device_colors = function(n) {
     RColorBrewer::brewer.pal(n, "Dark2")
 },
  do_otd = TRUE,
  OTD_kwargs_loss = list(loss = lossfun_hist, verbose = FALSE, write_intermediate =
    FALSE, should_skip = function(i, j) FALSE, take_time = FALSE, return_as_matrix =
    TRUE),
  do_flowsom = TRUE,
  nClus = 5,
  scale = FALSE,
  xdim = 3,
  ydim = 3,
  seed = 3711283
)
}
\arguments{
\item{flowframes}{A named list of \code{flowFrame} objects containing flow cytometry data.}

\item{df}{A \code{data.table} containing metadata with at least the columns \code{"File"}, \code{"Device"}, and \code{"Sample"}.}

\item{ff_columns_relevant}{A character vector specifying the relevant markers for analysis.}

\item{transformlist}{A transformation function or a named list of functions for transforming marker intensities
(default: \code{asinh(x / 1e3)}).}

\item{gatingsets}{A named list of gating sets for each dataset.}

\item{gatename_primary}{A character string specifying the primary gating population.}

\item{n_events_postgate}{An integer specifying the maximum number of events to keep post-gating.}

\item{postgate_sample_seed}{An integer seed for random sampling of events after gating (default: \code{42}).}

\item{marker_to_gate}{A named vector mapping marker names to their corresponding gates.}

\item{prepared_saveload}{A character string specifying the file path to save or load (if exists) prepared data.}

\item{device_colors}{A named vector or function that provides colors for each device.
If a function is provided, it should take the number of devices as input and return a vector of colors.}

\item{nClus}{An integer specifying the number of clusters for FlowSOM clustering (default: 5).}

\item{scale}{A logical indicating whether to scale the data in FlowSOM clustering (default: \code{FALSE}).}

\item{xdim}{An integer specifying the x-dimension of the FlowSOM grid (default: 3).}

\item{ydim}{An integer specifying the y-dimension of the FlowSOM grid (default: 3).}

\item{seed}{An integer specifying the random seed for FlowSOM clustering (default: \code{3711283}).}

\item{...}{Additional parameters passed to \code{plot_flowsom()}.}
}
\value{
A named list of ggplot2 objects containing:
\item{"Samples over time per device"}{A plot showing the number of samples collected over time per device.}
\item{"Counts and percentages"}{Plots of gated cell counts and percentages per sample.}
\item{"Positive population MFI"}{Plots showing the median fluorescence intensity (MFI) of positive gated populations.}
\item{"Density plots"}{Density distributions of marker intensities across devices and samples.}
\item{"Flowsom_PCA"}{Principal Component Analysis (PCA) plots of FlowSOM clustering results.}
\item{"Flowsom_MA"}{MA plots comparing cluster proportions between devices.}
}
\description{
This function performs a comparative analysis of flow cytometry data across multiple devices.
It includes basic sample statistics, gating, density plots, FlowSOM clustering, and marker intensity comparisons.
}
