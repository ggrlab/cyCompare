% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calc_ROC_grouped.R
\name{calc_ROC_grouped}
\alias{calc_ROC_grouped}
\title{Calculate ROC Metrics Grouped by Metadata}
\usage{
calc_ROC_grouped(
  df = NULL,
  result_grouping,
  dfcol_grouping_supersamples = c("Study"),
  dfcol_grouping_samples = "Device",
  dfcol_outcomes = c("outcome_1", "outcome_2"),
  dfcol_train_validation_other = "train_validation_test",
  dv_class_positive = c(outcome_1 = "A", outcome_2 = 5.1),
  ...
)
}
\arguments{
\item{df}{A \code{data.table} containing sample metadata. Must include columns specified by \verb{dfcol_*}
and a unique \code{File} column linking to \code{names(flowframes)}..}

\item{result_grouping}{A data frame containing prediction results and metadata columns used for grouping
(e.g., \code{outcome_}, \code{model_}, \code{clustering_}, and those specified by \verb{dfcol_*}).}

\item{dfcol_grouping_supersamples}{Column(s) in \code{df} used to define supersample groupings (e.g., \code{"Study"}).
A supersample collects samples of same origin: A study collects samples from
multiple donors/patients, a patient might be in multiple times.}

\item{dfcol_grouping_samples}{Column in \code{df} that defines sample-level grouping (e.g., \code{"Device"}).
Each final biologically different sample could be measured with a different technology,
cytometer, or lab but SHOULD have the same values.}

\item{dfcol_outcomes}{Character vector of outcome column names to model (e.g., \code{c("outcome_1", "outcome_2")}).}

\item{dfcol_train_validation_other}{Column indicating sample usage role: \code{"train"}, \code{"test"}, etc.}

\item{dv_class_positive}{Named vector specifying the positive class for each outcome (e.g., \code{c("outcome_1" = "A", "outcome_2" = 5.1)}).}

\item{...}{Currently unused; included for extensibility.}
}
\value{
A tibble containing grouped ROC statistics for each group defined by metadata. Includes:
\itemize{
\item ROC coordinates at each group's validation threshold.
\item AUC and confidence intervals.
\item Confusion matrix-based metrics (accuracy, kappa, null accuracy, etc.).
\item Log loss and class frequencies.
}
}
\description{
Computes ROC (Receiver Operating Characteristic) statistics for predicted outcomes,
grouped by relevant metadata such as device, model, and outcome type.
The positive class label is dynamically determined for each outcome using the \code{dv_class_positive} mapping.
}
\examples{
\dontrun{
# Assuming `result_df` is pre-processed with the appropriate columns
rocs <- calc_ROC_grouped(
    df = NULL,
    result_grouping = result_df,
    dfcol_grouping_supersamples = "Study",
    dfcol_grouping_samples = "Device",
    dfcol_outcomes = c("outcome_1", "outcome_2"),
    dfcol_train_validation_other = "train_validation_test",
    dv_class_positive = c("outcome_1" = "A", "outcome_2" = 5.1)
)
}
}
