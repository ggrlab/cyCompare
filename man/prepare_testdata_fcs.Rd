% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/test-utils.R
\name{prepare_testdata_fcs}
\alias{prepare_testdata_fcs}
\title{Prepare and write artificial FCS files for testing}
\usage{
prepare_testdata_fcs(n_repeats = 6, tempdir)
}
\arguments{
\item{n_repeats}{Integer scalar. Number of repeated copies to write for each
sample (\emph{per device}). Defaults to 6.}

\item{tempdir}{Character scalar. Path to a writable directory where the \code{.fcs}
files will be created.}
}
\value{
A named \code{list} with elements:
\describe{
\item{\code{df}}{A \code{data.frame} of sample metadata, with file paths in \code{File}.}
\item{\code{fs}}{A \code{flowCore::flowSet} of all written FCS files.}
\item{\code{relevant_mn}}{Character vector of marker names (from \code{\link[=prepare_testdata]{prepare_testdata()}}).}
\item{\code{marker_to_gate}}{Named list mapping channel names to example gating paths.}
\item{\code{gatingsets}}{List of \code{flowWorkspace::GatingSet} objects (references to the template).}
}
}
\description{
This function extends the synthetic dataset from \code{prepare_testdata()} by
adding a third artificial device/sample set, writing the resulting samples to
\code{.fcs} files, and returning the updated data structures.
}
\details{
It is primarily intended for unit tests or vignettes that require actual FCS
files on disk. The generated data include:
\itemize{
\item multiple devices (\code{"CyA"}, \code{"CyB"}, and a \code{"CyC"}),
\item multiple repetitions of each sample,
\item modified sample IDs and metadata for broader test coverage.
}

In this example dataset, we simulate measurements from three cytometry devices:
\strong{CyA}, \strong{CyB}, and \strong{CyC}.
\itemize{
\item Devices \strong{CyA} and \strong{CyB} belong to the same example study (\emph{EX}), where
\code{n_repeats * 3} donors are measured on \strong{both} devices.
For each sample, two outcomes are recorded:
\itemize{
\item \code{outcome_1}: categorical with groups \code{"A"} and \code{"B"}.
\item \code{outcome_2}: numeric with values \code{2.3} or \code{5.1}.
}
The \emph{EX} study samples are assigned to one of three splits:
\code{"train"}, \code{"validation"}, or \code{"test"}.
\item Device \strong{CyC} represents a \emph{prospective} scenario: a new instrument with
three unique donors, each measured \code{n_repeats} times.
These samples are labeled \code{"prospective"} in the split column.
}

This setup allows you to explore common analysis tasks such as:
\itemize{
\item Comparing measurements across devices,
\item Handling repeated measurements,
\item Working with both categorical and numeric outcomes,
\item Training and evaluating models using predefined dataset splits.
}

All samples are written to \code{.fcs} files \code{n_repeats} times with a suffix for
discrimination.
}
\keyword{datasets}
\keyword{testing}
